<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/rltm/web/rltm.js"></script>
<script src="bower_components/angular-chat/angular-chat.js"></script>

<script>
    // AngularJS Chat Configuration
    var chat = angular.module('chat', ['chat']);
    angular.module('chat').constant('config', {
        rltm: {
            service: "pubnub",
            config: {
                publishKey: "pub-c-e2bb2ca0-bf49-4093-b27b-06f891e42d88",
                subscribeKey: "sub-c-f70dbbbe-d6cf-11e7-9120-025833df6940"
            }
        }
    });

    chat.controller('chatCtrl', ['Messages', '$scope', function (Messages, $scope) {

        $scope.messages = [];

        Messages.receive(function (message) {
            $scope.messages.push(message);
        });

        $scope.send = function () {
            Messages.send({ 
                data: $scope.textbox 
            });
        };


    }]);

    //setting user and message

    //Messages.user({ id: 1, name: "name" });
    //Messages.send({ to: 1, data: "sample message" });

</script>

<h1>Group Chat</h1>
<div class="chat-container">
    <div class="chat">
        <div ng-app="chat">
            <div class="messaging-container"> 
                <div class="messages-container">
                    <div class="message" *ngFor="let message of messages">
                        <span class="bold">{{message.user}}:</span>
                        <span>{{message.data}}</span>
                        <br />
                    </div>
                </div>
                <form ng-submit="send()">
                    <input [(ngModel)]="message.data" [ngModelOptions]="{standalone: true}">
                </form>
                <span class="emoji-btn"><img src="../../assets/smile.svg" width="43" height="43" /></span>
            </div>
            <div class="members-list">

            </div>
        </div>
    </div>
</div>
